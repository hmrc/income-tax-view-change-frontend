@*
* Copyright 2020 HM Revenue & Customs
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*@
    
@import implicits.ImplicitCurrencyFormatter._
@import models.calculation.CalcOverview

@this()
@(overview: CalcOverview, taxYear: Int, isFinalCalc: Boolean, isAgent: Boolean)(implicit messages: Messages)

<table class="govuk-table" id="income-deductions-table">

    @if(!isFinalCalc){
        <caption class="govuk-table__caption govuk-table__caption--l">@messages("tax-year-overview.tax-calculation")</caption>
        <thead class="govuk-table__head">
            <tr class="govuk-table__row">
                <th scope="col" class="govuk-table__header">@messages("tax-year-overview.section")</th>
                <th scope="col" class="govuk-table__header govuk-table__header--numeric bold">@messages("tax-year-overview.amount")</th>
            </tr>
        </thead>




    }
    <tbody class="govuk-table__body">
        <tr class="govuk-table__row">
            <td class="govuk-table__cell">
                @if(isAgent){
                <a href=@controllers.agent.routes.IncomeSummaryController.showIncomeSummary(taxYear).url>@messages("tax-year-overview.income")</a>
                    } else {
                        <a href=@controllers.routes.IncomeSummaryController.showIncomeSummary(taxYear).url>@messages("tax-year-overview.income")</a>
                    }
                </td>
            <td class="govuk-table__cell govuk-table__cell--numeric total-section">@{
                overview.income.toCurrency
            }</td>
        </tr>
        <tr class="govuk-table__row">
            <td class="govuk-table__cell total-section">
                @if(isAgent){
                <a href=@controllers.agent.routes.DeductionsSummaryController.showDeductionsSummary(taxYear).url>@messages("tax-year-overview.deductions")</a>
                    } else {
                <a href=@controllers.routes.DeductionsSummaryController.showDeductionsSummary(taxYear).url>@messages("tax-year-overview.deductions")</a>
                    }
                </td>
            <td class="govuk-table__cell govuk-table__cell--numeric total-section">@{
                overview.deductions.toNegativeCurrency
            }</td>
        </tr>
        <tr class="govuk-table__row">
            @if(!isFinalCalc){
                <td class="govuk-table__cell total-section">@messages(s"tax-year-overview.taxable-income")</td>
                <td class="govuk-table__cell govuk-table__cell--numeric total-section">@{
                    overview.totalTaxableIncome.toCurrency
                }</td>
            } else {
                <td class="govuk-table__cell total-section">@messages(s"tax-year-overview.taxable-income.finalCalc")</td>
                <td class="govuk-table__cell govuk-table__cell--numeric total-section">@{
                    overview.totalTaxableIncome.toCurrency
                }</td>
            }
        </tr>
    </tbody>
</table>

<table class="govuk-table" id="taxdue-payments-table">
    <tbody class="govuk-table__body">
        <tr class="govuk-table__row">
            <td class="govuk-table__cell total-section">
                @if(!isFinalCalc){

                    @if(isAgent){
                    <a href=@controllers.agent.routes.TaxDueSummaryController.showTaxDueSummary(taxYear).url>@messages(s"tax-year-overview.tax-due")</a>
                    } else {
                    <a href=@controllers.routes.TaxDueSummaryController.showTaxDueSummary(taxYear).url>@messages(s"tax-year-overview.tax-due")</a>
                    }

                    } else {

                    @if(isAgent){
                    <a href=@controllers.agent.routes.TaxDueSummaryController.showTaxDueSummary(taxYear).url>@messages(s"tax-year-overview.tax-due.finalCalc")</a>
                        } else {
                    <a href=@controllers.routes.TaxDueSummaryController.showTaxDueSummary(taxYear).url>@messages(s"tax-year-overview.tax-due.finalCalc")</a>
                    }
                }
            </td>
            <td class="govuk-table__cell govuk-table__cell--numeric total-section">@{
                overview.taxDue.toCurrencyString
            }</td>
        </tr>
    </tbody>
</table>
