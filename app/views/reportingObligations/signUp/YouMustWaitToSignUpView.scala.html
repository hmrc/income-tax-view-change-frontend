@*
 * Copyright 2023 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import auth.MtdItUser
@import services.DateServiceInterface
@import views.helpers.whatYouOweChargesSummary.WYOMessagesHelper._
@import views.html.components._
@import views.html.layouts.unifiedLayout
@import viewUtils.ExternalUrlHelper
@import models.reportingObligations.signUp.YouMustWaitToSignUpViewModel

@this(
    mainTemplate: unifiedLayout,
    h1: h1,
    p: p,
    link: link,
    button: ContinueButton
)

@(
    viewModel: YouMustWaitToSignUpViewModel,
    isAgent: Boolean,
    origin: Option[String] = None
)(implicit user: MtdItUser[_], messages: Messages)

@individualContent = {
    @h1(messages("youMustWait.heading", viewModel.nextTaxYear), id = Some("you-must-wait-heading"))
    @p(id = Some("you-must-wait-text"))(Html(messages("youMustWait.text", viewModel.nextTaxYear)))
    @p(id = Some("you-must-wait-text-2")) {
        @messages("youMustWait.text2")
        @link(
            id = Some("you-must-wait-link"),
            link = ExternalUrlHelper.mtdForIncomeTaxUrl,
            messageKey = messages("youMustWait.linkText"),
            target = Some("_blank"),
            outerMessage = messages("base.fullstop")
        )
    }
}

@agentContent = {
    @h1(messages("youMustWait.agent.heading", viewModel.nextTaxYear), id = Some("you-must-wait-agent-heading"))
    @p(id = Some("you-must-wait-agent-text"))(Html(messages("youMustWait.agent.text", viewModel.nextTaxYear)))
    @*TODO - implement button in MISUV-10514*@
    @button(alternativeText = Some(messages("youMustWait.agent.button.text")), href = Some(""), id = Some("you-must-wait-agent-button"))
}

@mainTemplate(
    pageTitle = if(isAgent) messages("youMustWait.agent.title", viewModel.nextTaxYear) else messages("youMustWait.title", viewModel.nextTaxYear),
    backUrl = if(isAgent) None else Some(viewModel.backUrl),
    btaNavPartial = user.btaNavPartial
) {

    @if(!isAgent){
        @individualContent
    }else{
        @agentContent
    }

}
